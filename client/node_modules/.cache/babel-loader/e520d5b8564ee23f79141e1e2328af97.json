{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\kitri\\\\Documents\\\\GitHub\\\\reactpage123\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Col,List,Avatar}from'antd';import Axios from'axios';import SideVideo from'./Sections/SideVideo';import Subscribe from'./Sections/Subscribe';import Comment from'./Sections/Comment';import LikeDislikes from'./Sections/LikeDislikes';function VideoDetailPage(props){var videoId=props.match.params.videoId;var variable={videoId:videoId};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),VideoDetail=_useState2[0],setVideoDetail=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),Comments=_useState4[0],setComments=_useState4[1];useEffect(function(){Axios.post('/api/video/getVideoDetail',variable).then(function(response){if(response.data.success){setVideoDetail(response.data.videoDetail);}else{alert('비디오 정보를 가져오는데 실패했습니다.');}});Axios.post('/api/comment/getComments',variable).then(function(response){if(response.data.success){setComments(response.data.comments);}else{alert('코멘트 정보를 가져오는데 실패했습니다.');}});},[]);var refreshFunction=function refreshFunction(newComment){setComments(Comments.concat(newComment));};if(VideoDetail.writer){var subscribeButton=VideoDetail.writer._id!==localStorage.getItem('userId')&&/*#__PURE__*/React.createElement(Subscribe,{userTo:VideoDetail.writer._id,userFrom:localStorage.getItem('userId')});return/*#__PURE__*/React.createElement(Row,{gutter:[16,16]},/*#__PURE__*/React.createElement(Col,{lg:18,xs:24},/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%',padding:'3rem 4rem'}},/*#__PURE__*/React.createElement(\"video\",{style:{width:'100%'},src:\"http://localhost:5000/\".concat(VideoDetail.filePath),controls:true}),/*#__PURE__*/React.createElement(List.Item,{actions:[/*#__PURE__*/React.createElement(LikeDislikes,{video:true,userId:localStorage.getItem('userId'),videoId:videoId}),subscribeButton]},/*#__PURE__*/React.createElement(List.Item.Meta,{avatar:/*#__PURE__*/React.createElement(Avatar,{src:VideoDetail.writer.image}),title:VideoDetail.writer.name,description:VideoDetail.description})),/*#__PURE__*/React.createElement(Comment,{refreshFunction:refreshFunction,commentLists:Comments,postId:videoId}))),/*#__PURE__*/React.createElement(Col,{lg:6,xs:24},/*#__PURE__*/React.createElement(SideVideo,null)));}else{return/*#__PURE__*/React.createElement(\"div\",null,\"Loadig ...\");}}export default VideoDetailPage;","map":{"version":3,"sources":["C:/Users/kitri/Documents/GitHub/reactpage123/client/src/components/views/VideoDetailPage/VideoDetailPage.js"],"names":["React","useState","useEffect","Row","Col","List","Avatar","Axios","SideVideo","Subscribe","Comment","LikeDislikes","VideoDetailPage","props","videoId","match","params","variable","VideoDetail","setVideoDetail","Comments","setComments","post","then","response","data","success","videoDetail","alert","comments","refreshFunction","newComment","concat","writer","subscribeButton","_id","localStorage","getItem","width","padding","filePath","image","name","description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Row, Col, List, Avatar } from 'antd';\r\nimport Axios from 'axios';\r\nimport SideVideo from './Sections/SideVideo';\r\nimport Subscribe from './Sections/Subscribe';\r\nimport Comment from './Sections/Comment';\r\nimport LikeDislikes from './Sections/LikeDislikes';\r\n\r\nfunction VideoDetailPage(props) {\r\n\r\n    const videoId = props.match.params.videoId\r\n    const variable = { videoId: videoId}\r\n\r\n    const [VideoDetail, setVideoDetail] = useState([])\r\n    const [Comments, setComments] = useState([])\r\n    useEffect(() => {\r\n        Axios.post('/api/video/getVideoDetail', variable)\r\n        .then(response => {\r\n            if(response.data.success) {\r\n                setVideoDetail(response.data.videoDetail)\r\n            } else {\r\n                alert('비디오 정보를 가져오는데 실패했습니다.')\r\n            }\r\n        })\r\n\r\n        Axios.post('/api/comment/getComments', variable)\r\n        .then(response=> {\r\n            if(response.data.success) {\r\n                setComments(response.data.comments)\r\n            }else {\r\n                alert('코멘트 정보를 가져오는데 실패했습니다.')\r\n            }\r\n        })\r\n\r\n    }, [])\r\n\r\n    const refreshFunction = (newComment) => {\r\n        setComments(Comments.concat(newComment))\r\n    }\r\n\r\n    if(VideoDetail.writer) {\r\n\r\n        const subscribeButton = VideoDetail.writer._id !== localStorage.getItem('userId') && <Subscribe userTo={VideoDetail.writer._id} userFrom={localStorage.getItem('userId')} />\r\n\r\n        return (\r\n            <Row gutter={[16, 16]}>\r\n                <Col lg={18} xs={24} >\r\n                    <div style={{ width: '100%', padding: '3rem 4rem'}} >\r\n                        <video style={{ width: '100%' }} src={`http://localhost:5000/${VideoDetail.filePath}`} controls />\r\n\r\n                        <List.Item \r\n                            actions={[ <LikeDislikes video userId={localStorage.getItem('userId')} \r\n                            videoId={videoId} />, subscribeButton]}\r\n                        >\r\n                            <List.Item.Meta\r\n                                avatar={<Avatar src={VideoDetail.writer.image} />}\r\n                                title={VideoDetail.writer.name}\r\n                                description={VideoDetail.description}\r\n                            />\r\n                        \r\n                        </List.Item>\r\n\r\n                        {/* Comments */}\r\n                        <Comment refreshFunction={refreshFunction} commentLists={Comments}  postId={videoId}/>\r\n                    </div>\r\n                </Col>\r\n                <Col lg={6} xs={24} >\r\n                    <SideVideo />\r\n                </Col>\r\n            </Row>\r\n    )\r\n    } else {\r\n        return (\r\n            <div>Loadig ...</div>\r\n         )\r\n    }\r\n}\r\n\r\nexport default VideoDetailPage\r\n"]},"metadata":{},"sourceType":"module"}