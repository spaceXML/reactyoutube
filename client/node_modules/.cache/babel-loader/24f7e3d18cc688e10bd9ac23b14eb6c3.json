{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\kitri\\\\Documents\\\\GitHub\\\\reactpage123\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{withRouter}from\"react-router-dom\";import{loginUser}from\"../../../_actions/user_actions\";import{Formik}from'formik';import*as Yup from'yup';import{Form,Icon,Input,Button,Checkbox,Typography}from'antd';import{useDispatch}from\"react-redux\";var Title=Typography.Title;function LoginPage(props){var dispatch=useDispatch();var rememberMeChecked=localStorage.getItem(\"rememberMe\")?true:false;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),formErrorMessage=_useState2[0],setFormErrorMessage=_useState2[1];var _useState3=useState(rememberMeChecked),_useState4=_slicedToArray(_useState3,2),rememberMe=_useState4[0],setRememberMe=_useState4[1];var handleRememberMe=function handleRememberMe(){setRememberMe(!rememberMe);};var initialEmail=localStorage.getItem(\"rememberMe\")?localStorage.getItem(\"rememberMe\"):'';return/*#__PURE__*/React.createElement(Formik,{initialValues:{email:initialEmail,password:''},validationSchema:Yup.object().shape({email:Yup.string().email('Email is invalid').required('Email is required'),password:Yup.string().min(6,'Password must be at least 6 characters').required('Password is required')}),onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;setTimeout(function(){var dataToSubmit={email:values.email,password:values.password};dispatch(loginUser(dataToSubmit)).then(function(response){if(response.payload.loginSuccess){window.localStorage.setItem('userId',response.payload.userId);if(rememberMe===true){window.localStorage.setItem('rememberMe',values.id);}else{localStorage.removeItem('rememberMe');}props.history.push(\"/\");}else{setFormErrorMessage('Check out your Account or Password again');}}).catch(function(err){setFormErrorMessage('Check out your Account or Password again');setTimeout(function(){setFormErrorMessage(\"\");},3000);});setSubmitting(false);},500);}},function(props){var values=props.values,touched=props.touched,errors=props.errors,dirty=props.dirty,isSubmitting=props.isSubmitting,handleChange=props.handleChange,handleBlur=props.handleBlur,handleSubmit=props.handleSubmit,handleReset=props.handleReset;return/*#__PURE__*/React.createElement(\"div\",{className:\"app\"},/*#__PURE__*/React.createElement(Title,{level:2},\"Log In\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit,style:{width:'350px'}},/*#__PURE__*/React.createElement(Form.Item,{required:true},/*#__PURE__*/React.createElement(Input,{id:\"email\",prefix:/*#__PURE__*/React.createElement(Icon,{type:\"user\",style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Enter your email\",type:\"email\",value:values.email,onChange:handleChange,onBlur:handleBlur,className:errors.email&&touched.email?'text-input error':'text-input'}),errors.email&&touched.email&&/*#__PURE__*/React.createElement(\"div\",{className:\"input-feedback\"},errors.email)),/*#__PURE__*/React.createElement(Form.Item,{required:true},/*#__PURE__*/React.createElement(Input,{id:\"password\",prefix:/*#__PURE__*/React.createElement(Icon,{type:\"lock\",style:{color:'rgba(0,0,0,.25)'}}),placeholder:\"Enter your password\",type:\"password\",value:values.password,onChange:handleChange,onBlur:handleBlur,className:errors.password&&touched.password?'text-input error':'text-input'}),errors.password&&touched.password&&/*#__PURE__*/React.createElement(\"div\",{className:\"input-feedback\"},errors.password)),formErrorMessage&&/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"p\",{style:{color:'#ff0000bf',fontSize:'0.7rem',border:'1px solid',padding:'1rem',borderRadius:'10px'}},formErrorMessage)),/*#__PURE__*/React.createElement(Form.Item,null,/*#__PURE__*/React.createElement(Checkbox,{id:\"rememberMe\",onChange:handleRememberMe,checked:rememberMe},\"Remember me\"),/*#__PURE__*/React.createElement(\"a\",{className:\"login-form-forgot\",href:\"/reset_user\",style:{float:'right'}},\"forgot password\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",style:{minWidth:'100%'},disabled:isSubmitting,onSubmit:handleSubmit},\"Log in\")),\"Or \",/*#__PURE__*/React.createElement(\"a\",{href:\"/register\"},\"register now!\"))));});};export default withRouter(LoginPage);","map":{"version":3,"sources":["C:/Users/kitri/Documents/GitHub/reactpage123/client/src/components/views/LoginPage/LoginPage.js"],"names":["React","useState","withRouter","loginUser","Formik","Yup","Form","Icon","Input","Button","Checkbox","Typography","useDispatch","Title","LoginPage","props","dispatch","rememberMeChecked","localStorage","getItem","formErrorMessage","setFormErrorMessage","rememberMe","setRememberMe","handleRememberMe","initialEmail","email","password","object","shape","string","required","min","values","setSubmitting","setTimeout","dataToSubmit","then","response","payload","loginSuccess","window","setItem","userId","id","removeItem","history","push","catch","err","touched","errors","dirty","isSubmitting","handleChange","handleBlur","handleSubmit","handleReset","width","color","fontSize","border","padding","borderRadius","float","minWidth"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { loginUser } from \"../../../_actions/user_actions\";\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { Form, Icon, Input, Button, Checkbox, Typography } from 'antd';\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst { Title } = Typography;\r\n\r\nfunction LoginPage(props) {\r\n  const dispatch = useDispatch();\r\n  const rememberMeChecked = localStorage.getItem(\"rememberMe\") ? true : false;\r\n\r\n  const [formErrorMessage, setFormErrorMessage] = useState('')\r\n  const [rememberMe, setRememberMe] = useState(rememberMeChecked)\r\n\r\n  const handleRememberMe = () => {\r\n    setRememberMe(!rememberMe)\r\n  };\r\n\r\n  const initialEmail = localStorage.getItem(\"rememberMe\") ? localStorage.getItem(\"rememberMe\") : '';\r\n\r\n  return (\r\n    <Formik\r\n      initialValues={{\r\n        email: initialEmail,\r\n        password: '',\r\n      }}\r\n      validationSchema={Yup.object().shape({\r\n        email: Yup.string()\r\n          .email('Email is invalid')\r\n          .required('Email is required'),\r\n        password: Yup.string()\r\n          .min(6, 'Password must be at least 6 characters')\r\n          .required('Password is required'),\r\n      })}\r\n      onSubmit={(values, { setSubmitting }) => {\r\n        setTimeout(() => {\r\n          let dataToSubmit = {\r\n            email: values.email,\r\n            password: values.password\r\n          };\r\n\r\n          dispatch(loginUser(dataToSubmit))\r\n            .then(response => {\r\n              if (response.payload.loginSuccess) {\r\n                window.localStorage.setItem('userId', response.payload.userId);\r\n                if (rememberMe === true) {\r\n                  window.localStorage.setItem('rememberMe', values.id);\r\n                } else {\r\n                  localStorage.removeItem('rememberMe');\r\n                }\r\n                props.history.push(\"/\");\r\n              } else {\r\n                setFormErrorMessage('Check out your Account or Password again')\r\n              }\r\n            })\r\n            .catch(err => {\r\n              setFormErrorMessage('Check out your Account or Password again')\r\n              setTimeout(() => {\r\n                setFormErrorMessage(\"\")\r\n              }, 3000);\r\n            });\r\n          setSubmitting(false);\r\n        }, 500);\r\n      }}\r\n    >\r\n      {props => {\r\n        const {\r\n          values,\r\n          touched,\r\n          errors,\r\n          dirty,\r\n          isSubmitting,\r\n          handleChange,\r\n          handleBlur,\r\n          handleSubmit,\r\n          handleReset,\r\n        } = props;\r\n        return (\r\n          <div className=\"app\">\r\n\r\n            <Title level={2}>Log In</Title>\r\n            <form onSubmit={handleSubmit} style={{ width: '350px' }}>\r\n\r\n              <Form.Item required>\r\n                <Input\r\n                  id=\"email\"\r\n                  prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                  placeholder=\"Enter your email\"\r\n                  type=\"email\"\r\n                  value={values.email}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={\r\n                    errors.email && touched.email ? 'text-input error' : 'text-input'\r\n                  }\r\n                />\r\n                {errors.email && touched.email && (\r\n                  <div className=\"input-feedback\">{errors.email}</div>\r\n                )}\r\n              </Form.Item>\r\n\r\n              <Form.Item required>\r\n                <Input\r\n                  id=\"password\"\r\n                  prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                  placeholder=\"Enter your password\"\r\n                  type=\"password\"\r\n                  value={values.password}\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  className={\r\n                    errors.password && touched.password ? 'text-input error' : 'text-input'\r\n                  }\r\n                />\r\n                {errors.password && touched.password && (\r\n                  <div className=\"input-feedback\">{errors.password}</div>\r\n                )}\r\n              </Form.Item>\r\n\r\n              {formErrorMessage && (\r\n                <label ><p style={{ color: '#ff0000bf', fontSize: '0.7rem', border: '1px solid', padding: '1rem', borderRadius: '10px' }}>{formErrorMessage}</p></label>\r\n              )}\r\n\r\n              <Form.Item>\r\n                <Checkbox id=\"rememberMe\" onChange={handleRememberMe} checked={rememberMe} >Remember me</Checkbox>\r\n                <a className=\"login-form-forgot\" href=\"/reset_user\" style={{ float: 'right' }}>\r\n                  forgot password\r\n                  </a>\r\n                <div>\r\n                  <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{ minWidth: '100%' }} disabled={isSubmitting} onSubmit={handleSubmit}>\r\n                    Log in\r\n                </Button>\r\n                </div>\r\n                Or <a href=\"/register\">register now!</a>\r\n              </Form.Item>\r\n            </form>\r\n          </div>\r\n        );\r\n      }}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default withRouter(LoginPage);\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}